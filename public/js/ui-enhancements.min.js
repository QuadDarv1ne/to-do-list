class UIEnhancements{constructor(){this.init()}escapeHtml(t){const e=document.createElement("div");return e.textContent=t,e.innerHTML}init(){this.initRippleEffect(),this.initAnimateOnScroll(),this.initSmoothScroll(),this.initTableSorting(),this.initTooltips(),this.initSkeletonLoading()}initRippleEffect(){document.addEventListener("click",t=>{const e=t.target.closest(".btn, .card, .list-group-item");if(!e)return;const n=document.createElement("span"),o=e.getBoundingClientRect(),a=Math.max(o.width,o.height),i=t.clientX-o.left-a/2,c=t.clientY-o.top-a/2;n.style.width=n.style.height=a+"px",n.style.left=i+"px",n.style.top=c+"px",n.classList.add("ripple"),e.classList.contains("ripple-container")||e.classList.add("ripple-container"),e.appendChild(n),setTimeout(()=>n.remove(),600)})}initAnimateOnScroll(){const t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("animate-fade-in"),t.unobserve(e.target))})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});document.querySelectorAll(".card, .list-group-item, .stat-card").forEach(e=>{t.observe(e)})}initSmoothScroll(){document.querySelectorAll('a[href^="#"]').forEach(t=>{t.addEventListener("click",function(t){const e=this.getAttribute("href");if("#"===e)return;const n=document.querySelector(e);n&&(t.preventDefault(),n.scrollIntoView({behavior:"smooth",block:"start"}))})})}initTableSorting(){document.querySelectorAll(".table th.sortable").forEach(t=>{t.addEventListener("click",()=>{const e=t.closest("table"),n=e.querySelector("tbody"),o=Array.from(n.querySelectorAll("tr")),a=Array.from(t.parentElement.children).indexOf(t),i=t.classList.contains("asc");e.querySelectorAll("th").forEach(t=>{t.classList.remove("asc","desc")}),t.classList.add(i?"desc":"asc"),o.sort((t,e)=>{const n=t.children[a].textContent.trim(),o=e.children[a].textContent.trim(),c=parseFloat(n),s=parseFloat(o);return isNaN(c)||isNaN(s)?i?o.localeCompare(n):n.localeCompare(o):i?s-c:c-s}),o.forEach(t=>n.appendChild(t))})})}initTooltips(){document.querySelectorAll("[data-tooltip]").forEach(t=>{const e=document.createElement("div");e.className="tooltip-content",e.textContent=t.getAttribute("data-tooltip");const n=document.createElement("div");n.className="tooltip-wrapper",t.parentNode.insertBefore(n,t),n.appendChild(t),n.appendChild(e)})}initSkeletonLoading(){document.querySelectorAll('[data-loading="true"]').forEach(t=>{t.classList.add("skeleton")})}static animateCounter(t,e,n=1e3){const o=parseInt(t.textContent)||0,a=(e-o)/(n/16);let i=o;const c=setInterval(()=>{i+=a,a>0&&i>=e||a<0&&i<=e?(t.textContent=e.toLocaleString("ru-RU"),clearInterval(c)):t.textContent=Math.round(i).toLocaleString("ru-RU")},16)}static showLoading(t){const e=document.createElement("div");e.className="loading-spinner",e.setAttribute("data-loading-spinner","true"),t.appendChild(e),t.style.position="relative",t.style.pointerEvents="none",t.style.opacity="0.6"}static hideLoading(t){const e=t.querySelector("[data-loading-spinner]");e&&e.remove(),t.style.pointerEvents="",t.style.opacity=""}static showToast(t,e="info",n=3e3){const o=document.createElement("div");o.className=`alert alert-${e} animate-slide-in-right`,o.style.cssText="\n            position: fixed;\n            top: 80px;\n            right: 20px;\n            z-index: 9999;\n            min-width: 300px;\n            box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n        ";const a={success:"fa-check-circle",danger:"fa-exclamation-circle",warning:"fa-exclamation-triangle",info:"fa-info-circle"};o.innerHTML=`\n            <i class="fas ${a[e]||a.info} me-2"></i>\n            ${this.escapeHtml(t)}\n        `,document.body.appendChild(o),setTimeout(()=>{o.style.animation="fadeIn 0.3s ease-out reverse",setTimeout(()=>o.remove(),300)},n)}static confirm(t,e,n){const o=document.createElement("div");o.className="modal-backdrop fade show",o.style.zIndex="9998";const a=document.createElement("div");a.className="modal fade show animate-scale-in",a.style.cssText="display: block; z-index: 9999;";a.innerHTML=`\n            <div class="modal-dialog modal-dialog-centered">\n                <div class="modal-content">\n                    <div class="modal-header">\n                        <h5 class="modal-title">Подтверждение</h5>\n                    </div>\n                    <div class="modal-body">\n                        <p>${(t=>{const e=document.createElement("div");return e.textContent=t,e.innerHTML})(t)}</p>\n                    </div>\n                    <div class="modal-footer">\n                        <button type="button" class="btn btn-secondary" data-action="cancel">Отмена</button>\n                        <button type="button" class="btn btn-primary" data-action="confirm">Подтвердить</button>\n                    </div>\n                </div>\n            </div>\n        `,document.body.appendChild(o),document.body.appendChild(a);const i=()=>{a.remove(),o.remove()};a.querySelector('[data-action="confirm"]').addEventListener("click",()=>{i(),e&&e()}),a.querySelector('[data-action="cancel"]').addEventListener("click",()=>{i(),n&&n()}),o.addEventListener("click",()=>{i(),n&&n()})}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{window.uiEnhancements=new UIEnhancements}):window.uiEnhancements=new UIEnhancements,window.UIEnhancements=UIEnhancements;