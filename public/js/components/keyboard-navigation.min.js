!function(){"use strict";const e={d:{action:"navigate",url:"/dashboard",description:"Дашборд"},t:{action:"navigate",url:"/tasks",description:"Задачи"},k:{action:"navigate",url:"/kanban",description:"Канбан"},c:{action:"navigate",url:"/calendar",description:"Календарь"},p:{action:"navigate",url:"/profile",description:"Профиль"},n:{action:"navigate",url:"/task/new",description:"Новая задача"},"?":{action:"modal",target:"keyboardShortcutsModal",description:"Справка"}};let t=!1;function n(){t||(t=!0,document.body.classList.add("keyboard-mode"))}function o(){t=!1,document.body.classList.remove("keyboard-mode")}function a(e){window.Turbo?Turbo.visit(e):window.location.href=e}function i(){const e=document.getElementById("keyboardShortcutsModal");if(e){new bootstrap.Modal(e).show()}}function d(t){const n=document.activeElement;if("INPUT"===n.tagName||"TEXTAREA"===n.tagName||n.isContentEditable)return;if(t.ctrlKey||t.altKey||t.metaKey){if(t.ctrlKey&&"k"===t.key){t.preventDefault();const e=document.querySelector('input[name="search"]');return void(e&&(e.focus(),e.select()))}return}if("Shift"===t.key)return;const o=t.key.toLowerCase();if(e[o]){t.preventDefault();const n=e[o];"navigate"===n.action?a(n.url):"modal"===n.action&&i()}if("Escape"===t.key){const e=document.querySelector(".modal.show");if(e){const t=bootstrap.Modal.getInstance(e);t&&t.hide()}}}function c(){document.addEventListener("keydown",d),document.addEventListener("keydown",e=>{"Tab"===e.key&&n()}),document.addEventListener("mousedown",()=>{o()}),document.addEventListener("keydown",e=>{if(e.ctrlKey&&"k"===e.key){e.preventDefault();const t=document.querySelector('input[name="search"]');t&&(t.focus(),t.select())}}),window.KeyboardShortcuts={enable:n,disable:o,navigate:a,showHelp:i}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",c):c(),document.addEventListener("turbo:load",c)}();