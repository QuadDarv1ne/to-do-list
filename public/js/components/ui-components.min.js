!function(){"use strict";window.uiComponents={toast:new class{constructor(){this.container=null,this.toasts=[],this.defaultDuration=5e3,this.maxToasts=5}init(){this.createContainer()}createContainer(){document.getElementById("toast-container")||(this.container=document.createElement("div"),this.container.id="toast-container",this.container.className="toast-container",document.body.appendChild(this.container))}show(t,e="info",n={}){const o=n.duration||this.defaultDuration,i=(n.position,this.getIcon(e)),s=document.createElement("div");s.className=`toast toast-${e}`,s.innerHTML=`\n                <div class="toast-icon">${i}</div>\n                <div class="toast-message">${this.escapeHtml(t)}</div>\n                <button class="toast-close" aria-label="Close">\n                    <i class="fas fa-times"></i>\n                </button>\n            `;return s.querySelector(".toast-close").addEventListener("click",()=>this.remove(s)),o>0&&setTimeout(()=>this.remove(s),o),this.container.appendChild(s),this.toasts.push(s),this.toasts.length>this.maxToasts&&this.remove(this.toasts[0]),s}remove(t){t.style.animation="fadeOut 0.3s ease-out forwards",setTimeout(()=>{t.remove(),this.toasts=this.toasts.filter(e=>e!==t)},300)}getIcon(t){const e={success:'<i class="fas fa-check-circle"></i>',error:'<i class="fas fa-exclamation-circle"></i>',warning:'<i class="fas fa-exclamation-triangle"></i>',info:'<i class="fas fa-info-circle"></i>',loading:'<i class="fas fa-spinner fa-spin"></i>'};return e[t]||e.info}escapeHtml(t){const e=document.createElement("div");return e.textContent=t,e.innerHTML}success(t,e){return this.show(t,"success",e)}error(t,e){return this.show(t,"error",e)}warning(t,e){return this.show(t,"warning",e)}info(t,e){return this.show(t,"info",e)}loading(t,e){return this.show(t,"loading",e)}},modal:new class{constructor(){this.activeModal=null}show(t,e={}){const{title:n="",size:o="medium",showClose:i=!0,onClose:s=null,actions:a=[]}=e,r=document.createElement("div");r.className="modal-enhanced",r.innerHTML=`\n                <div class="modal-backdrop-enhanced"></div>\n                <div class="modal-content-enhanced modal-${o}">\n                    ${n?`\n                        <div class="modal-header-enhanced">\n                            <h5 class="modal-title">${this.escapeHtml(n)}</h5>\n                            ${i?'<button class="modal-close-enhanced" aria-label="Close"><i class="fas fa-times"></i></button>':""}\n                        </div>\n                    `:""}\n                    <div class="modal-body-enhanced">${t}</div>\n                    ${a.length>0?`\n                        <div class="modal-footer-enhanced">\n                            ${a.map(t=>`\n                                <button class="btn-enhanced btn-${t.type||"primary"}" data-action="${t.id||""}">\n                                    ${t.label}\n                                </button>\n                            `).join("")}\n                        </div>\n                    `:""}\n                </div>\n            `,document.body.appendChild(r);const c=r.querySelector(".modal-close-enhanced"),l=r.querySelector(".modal-backdrop-enhanced"),d=()=>{r.classList.remove("show"),setTimeout(()=>{r.remove(),s&&s()},300)};c&&c.addEventListener("click",d),l&&l.addEventListener("click",d),r.querySelectorAll("[data-action]").forEach(t=>{t.addEventListener("click",e=>{const n=a.find(e=>e.id===t.dataset.action);n&&n.onClick&&n.onClick(d)})});const h=t=>{"Escape"===t.key&&(d(),document.removeEventListener("keydown",h))};return document.addEventListener("keydown",h),requestAnimationFrame(()=>{r.classList.add("show")}),this.activeModal=r,{modal:r,close:d}}confirm(t,e={}){const{title:n="Подтверждение",confirmLabel:o="Подтвердить",cancelLabel:i="Отмена",type:s="primary"}=e;return new Promise(e=>{const a=`<p class="mb-0">${this.escapeHtml(t)}</p>`,{close:r}=this.show(a,{title:n,actions:[{id:"cancel",label:i,type:"outline",onClick:()=>{r(),e(!1)}},{id:"confirm",label:o,type:s,onClick:()=>{r(),e(!0)}}]})})}escapeHtml(t){const e=document.createElement("div");return e.textContent=t,e.innerHTML}},loading:new class{constructor(){this.overlay=null}show(t="Загрузка..."){this.overlay&&this.hide(),this.overlay=document.createElement("div"),this.overlay.className="loading-overlay",this.overlay.style.cssText="\n                position: fixed;\n                inset: 0;\n                background: rgba(0, 0, 0, 0.5);\n                backdrop-filter: blur(4px);\n                display: flex;\n                flex-direction: column;\n                align-items: center;\n                justify-content: center;\n                z-index: 9999;\n                animation: fadeIn 0.3s ease-out;\n            ",this.overlay.innerHTML=`\n                <div class="spinner-enhanced spinner-lg mb-3"></div>\n                <div style="color: white; font-weight: 500;">${this.escapeHtml(t)}</div>\n            `,document.body.appendChild(this.overlay)}hide(){this.overlay&&(this.overlay.style.animation="fadeOut 0.3s ease-out forwards",setTimeout(()=>{this.overlay.remove(),this.overlay=null},300))}escapeHtml(t){const e=document.createElement("div");return e.textContent=t,e.innerHTML}},ripple:class{static init(t=".ripple"){document.querySelectorAll(t).forEach(t=>{t.addEventListener("click",e=>{this.create(e,t)})})}static create(t,e){const n=document.createElement("span"),o=Math.max(e.clientWidth,e.clientHeight),i=o/2,s=e.getBoundingClientRect();n.style.cssText=`\n                position: absolute;\n                width: ${o}px;\n                height: ${o}px;\n                border-radius: 50%;\n                background: rgba(255, 255, 255, 0.4);\n                transform: scale(0);\n                animation: ripple 0.6s ease-out;\n                pointer-events: none;\n                left: ${t.clientX-s.left-i}px;\n                top: ${t.clientY-s.top-i}px;\n            `,e.style.position="relative",e.style.overflow="hidden",e.appendChild(n),setTimeout(()=>n.remove(),600)}},scrollAnimations:new class{constructor(){this.observer=null,this.defaults={threshold:.1,rootMargin:"0px 0px -50px 0px"}}init(t={}){const e={...this.defaults,...t};this.observer=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&(this.animate(t.target),this.observer.unobserve(t.target))})},e),document.querySelectorAll("[data-animate]").forEach(t=>{this.observer.observe(t)})}animate(t){const e=t.dataset.animate||"fade-in",n=t.dataset.delay||0;t.style.animationDelay=`${n}ms`,t.classList.add(`animate-${e}`)}},tooltip:new class{constructor(){this.tooltip=null}init(){document.querySelectorAll("[data-tooltip]").forEach(t=>{t.addEventListener("mouseenter",e=>this.show(e,t)),t.addEventListener("mouseleave",()=>this.hide())})}show(t,e){const n=e.dataset.tooltip,o=e.dataset.position||"top";this.tooltip=document.createElement("div"),this.tooltip.className="tooltip-enhanced",this.tooltip.textContent=n,this.tooltip.style.cssText="\n                position: fixed;\n                padding: 8px 12px;\n                background: #1e293b;\n                color: #fff;\n                border-radius: 8px;\n                font-size: 14px;\n                z-index: 1070;\n                pointer-events: none;\n                animation: fadeIn 0.2s ease-out;\n            ",document.body.appendChild(this.tooltip),this.updatePosition(t,e,o)}updatePosition(t,e,n){const o=e.getBoundingClientRect(),i=this.tooltip.getBoundingClientRect();let s,a;switch(n){case"top":s=o.top-i.height-8,a=o.left+(o.width-i.width)/2;break;case"bottom":s=o.bottom+8,a=o.left+(o.width-i.width)/2;break;case"left":s=o.top+(o.height-i.height)/2,a=o.left-i.width-8;break;case"right":s=o.top+(o.height-i.height)/2,a=o.right+8}this.tooltip.style.top=`${s}px`,this.tooltip.style.left=`${a}px`}hide(){this.tooltip&&(this.tooltip.style.animation="fadeOut 0.2s ease-out forwards",setTimeout(()=>{this.tooltip.remove(),this.tooltip=null},200))}},accordion:new class{init(t=".accordion-enhanced"){document.querySelectorAll(t).forEach(t=>{this.initAccordion(t)})}initAccordion(t){t.querySelectorAll(".accordion-header").forEach(e=>{e.addEventListener("click",()=>{const n=e.classList.contains("active"),o=e.nextElementSibling;if(t.querySelectorAll(".accordion-header").forEach(t=>{t.classList.remove("active"),t.nextElementSibling.style.maxHeight="0"}),!n){e.classList.add("active");const t=o.querySelector(".accordion-body-content");o.style.maxHeight=`${t.scrollHeight}px`}})})}},tabs:new class{init(t=".tabs-enhanced"){document.querySelectorAll(t).forEach(t=>{this.initTabs(t)})}initTabs(t){t.querySelectorAll(".tab-enhanced").forEach(e=>{e.addEventListener("click",()=>{const n=e.dataset.target;if(t.querySelectorAll(".tab-enhanced").forEach(t=>{t.classList.remove("active")}),e.classList.add("active"),n){const e=t.closest("[data-tabs-container]");if(e){e.querySelectorAll(".tab-content").forEach(t=>{t.classList.remove("active")});const t=document.getElementById(n);t&&t.classList.add("active")}}})})}},progressBar:new class{init(){this.observeProgressBars()}observeProgressBars(){const t=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const n=e.target.dataset.value;n&&this.animate(e.target,parseInt(n)),t.unobserve(e.target)}})},{threshold:.5});document.querySelectorAll(".progress-bar[data-value]").forEach(e=>{t.observe(e)})}animate(t,e){t.style.width="0%",requestAnimationFrame(()=>{t.style.transition="width 1s ease-out",t.style.width=`${e}%`})}},counter:new class{init(){this.observeCounters()}observeCounters(){const t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(this.animate(e.target),t.unobserve(e.target))})},{threshold:.5});document.querySelectorAll("[data-counter]").forEach(e=>{t.observe(e)})}animate(t){const e=parseInt(t.dataset.counter),n=e/125;let o=0;const i=setInterval(()=>{o+=n,o>=e?(t.textContent=e.toLocaleString(),clearInterval(i)):t.textContent=Math.floor(o).toLocaleString()},16)}}},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{window.uiComponents.toast.init(),window.uiComponents.tooltip.init(),window.uiComponents.accordion.init(),window.uiComponents.tabs.init(),window.uiComponents.progressBar.init(),window.uiComponents.counter.init(),window.uiComponents.scrollAnimations.init(),window.uiComponents.ripple.init()}):(window.uiComponents.toast.init(),window.uiComponents.tooltip.init(),window.uiComponents.accordion.init(),window.uiComponents.tabs.init(),window.uiComponents.progressBar.init(),window.uiComponents.counter.init(),window.uiComponents.scrollAnimations.init(),window.uiComponents.ripple.init()),window.showToast=(t,e="info")=>window.uiComponents.toast.show(t,e),window.showLoading=t=>window.uiComponents.loading.show(t),window.hideLoading=()=>window.uiComponents.loading.hide(),window.showModal=(t,e)=>window.uiComponents.modal.show(t,e),window.showConfirm=(t,e)=>window.uiComponents.modal.confirm(t,e)}();