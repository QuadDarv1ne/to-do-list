!function(){"use strict";class t{constructor(t,e={}){this.element=t,this.options={onSwipeLeft:null,onSwipeRight:null,onSwipeUp:null,onSwipeDown:null,onLongPress:null,onDoubleTap:null,onPinch:null,threshold:50,longPressDuration:500},this.options={...this.options,...e},this.touchStartX=0,this.touchStartY=0,this.touchEndX=0,this.touchEndY=0,this.longPressTimer=null,this.lastTapTime=0,this.init()}init(){this.element.addEventListener("touchstart",t=>this.handleTouchStart(t),{passive:!0}),this.element.addEventListener("touchmove",t=>this.handleTouchMove(t),{passive:!0}),this.element.addEventListener("touchend",t=>this.handleTouchEnd(t),{passive:!0})}handleTouchStart(t){this.touchStartX=t.changedTouches[0].screenX,this.touchStartY=t.changedTouches[0].screenY,this.options.onLongPress&&(this.longPressTimer=setTimeout(()=>{this.options.onLongPress(t),this.longPressTimer=null},this.options.longPressDuration))}handleTouchMove(t){this.longPressTimer&&(clearTimeout(this.longPressTimer),this.longPressTimer=null)}handleTouchEnd(t){this.longPressTimer&&(clearTimeout(this.longPressTimer),this.longPressTimer=null),this.touchEndX=t.changedTouches[0].screenX,this.touchEndY=t.changedTouches[0].screenY,this.detectGestures(t)}detectGestures(t){const e=this.touchEndX-this.touchStartX,s=this.touchEndY-this.touchStartY,i=Math.abs(e),o=Math.abs(s),n=(new Date).getTime();n-this.lastTapTime<300&&this.options.onDoubleTap&&this.options.onDoubleTap(t),this.lastTapTime=n,(i>this.threshold||o>this.threshold)&&(i>o?e>0&&this.options.onSwipeRight?this.options.onSwipeRight(t):e<0&&this.options.onSwipeLeft&&this.options.onSwipeLeft(t):s>0&&this.options.onSwipeDown?this.options.onSwipeDown(t):s<0&&this.options.onSwipeUp&&this.options.onSwipeUp(t))}}function e(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}window.mobileInteractions={TouchGestures:t,SwipeActions:class{constructor(t=".swipe-action"){this.elements=document.querySelectorAll(t),this.currentSwipe=null,this.init()}init(){this.elements.forEach(e=>{if(!e.querySelector(".swipe-action-content"))return;new t(e,{onSwipeLeft:()=>this.revealButtons(e),onSwipeRight:()=>this.hideButtons(e),threshold:30});document.addEventListener("click",t=>{e.contains(t.target)||this.hideButtons(e)})})}revealButtons(t){const e=t.querySelector(".swipe-action-content"),s=t.querySelector(".swipe-action-buttons");if(s){const i=s.offsetWidth;e.style.transform=`translateX(-${Math.min(i,100)}px)`,t.classList.add("revealing"),this.currentSwipe=t}}hideButtons(t){const e=t.querySelector(".swipe-action-content");e&&(e.style.transform="translateX(0)",t.classList.remove("revealing"))}toggle(t){t.classList.contains("revealing")?this.hideButtons(t):this.revealButtons(t)}},PullToRefresh:class{constructor(t={}){this.options={onRefresh:null,threshold:100,container:null},this.options={...this.options,...t},this.startY=0,this.currentY=0,this.isRefreshing=!1,this.ptrBox=null,this.init()}init(){const t=this.options.container||document.body;t.addEventListener("touchstart",t=>this.handleTouchStart(t),{passive:!0}),t.addEventListener("touchmove",t=>this.handleTouchMove(t),{passive:!1}),t.addEventListener("touchend",t=>this.handleTouchEnd(t),{passive:!0})}handleTouchStart(t){0===window.scrollY&&(this.startY=t.changedTouches[0].screenY)}handleTouchMove(t){if(0===window.scrollY&&this.startY>0){this.currentY=t.changedTouches[0].screenY;const e=this.currentY-this.startY;e>0&&e<this.options.threshold&&(t.preventDefault(),this.updateIndicator(e))}}handleTouchEnd(t){this.currentY-this.startY>this.options.threshold&&!this.isRefreshing&&this.triggerRefresh(),this.resetIndicator(),this.startY=0,this.currentY=0}updateIndicator(t){let e=document.querySelector(".ptr--box");e||(e=document.createElement("div"),e.className="ptr--box",e.innerHTML='<div class="ptr--arrow"><i class="fas fa-arrow-down"></i></div>',document.body.prepend(e));const s=t/this.options.threshold*180,i=e.querySelector(".ptr--arrow");i&&(i.style.transform=`rotate(${s}deg)`)}resetIndicator(){const t=document.querySelector(".ptr--box");t&&t.remove()}async triggerRefresh(){if(this.isRefreshing||!this.options.onRefresh)return;this.isRefreshing=!0;const t=document.querySelector(".ptr--box");t&&t.classList.add("refreshing");try{await this.options.onRefresh()}finally{this.isRefreshing=!1,t&&t.classList.remove("refreshing"),this.resetIndicator()}}},BottomSheet:class{constructor(){this.currentSheet=null}show(t,e={}){const{title:s="",showClose:i=!0,onClose:o=null}=e,n=document.createElement("div");n.className="popover-mobile-backdrop",n.addEventListener("click",()=>this.close());const h=document.createElement("div");h.className="popover-mobile",h.innerHTML=`\n                ${s||i?`\n                    <div class="popover-mobile-header">\n                        ${s?`<h5 class="mb-0">${s}</h5>`:""}\n                        ${i?'<button class="btn-icon" aria-label="Close"><i class="fas fa-times"></i></button>':""}\n                    </div>\n                `:""}\n                <div class="popover-mobile-body">${t}</div>\n            `;const r=h.querySelector(".btn-icon");return r&&r.addEventListener("click",()=>this.close()),document.body.appendChild(n),document.body.appendChild(h),this.currentSheet={sheet:h,backdrop:n,onClose:o},requestAnimationFrame(()=>{n.classList.add("show"),h.classList.add("show")}),{close:()=>this.close()}}close(){if(!this.currentSheet)return;const{sheet:t,backdrop:e,onClose:s}=this.currentSheet;t.classList.remove("show"),e.classList.remove("show"),setTimeout(()=>{t.remove(),e.remove(),s&&s(),this.currentSheet=null},300)}},MobileMenu:class{constructor(t=".sidebar"){this.sidebar=document.querySelector(t),this.overlay=null,this.init()}init(){this.sidebar&&(this.overlay=document.createElement("div"),this.overlay.className="sidebar-overlay",this.overlay.addEventListener("click",()=>this.hide()),document.body.appendChild(this.overlay),document.addEventListener("keydown",t=>{"Escape"===t.key&&this.overlay.classList.contains("show")&&this.hide()}))}show(){this.sidebar.classList.add("show"),this.overlay.classList.add("show"),document.body.style.overflow="hidden"}hide(){this.sidebar.classList.remove("show"),this.overlay.classList.remove("show"),document.body.style.overflow=""}toggle(){this.overlay.classList.contains("show")?this.hide():this.show()}},VirtualScroll:class{constructor(t,e={}){this.container="string"==typeof t?document.querySelector(t):t,this.options={itemHeight:60,bufferSize:5,renderItem:null,...e},this.items=[],this.visibleRange={start:0,end:0},this.containerHeight=0,this.init()}init(){this.container.style.overflow="auto",this.container.addEventListener("scroll",()=>this.onScroll(),{passive:!0}),this.updateVisibleRange()}setItems(t){this.items=t,this.containerHeight=t.length*this.options.itemHeight,this.container.style.height=`${this.containerHeight}px`,this.updateVisibleRange()}onScroll(){this.updateVisibleRange(),this.render()}updateVisibleRange(){const t=this.container.scrollTop,e=this.container.clientHeight,s=Math.max(0,Math.floor(t/this.options.itemHeight)-this.options.bufferSize),i=Math.min(this.items.length,Math.ceil((t+e)/this.options.itemHeight)+this.options.bufferSize);this.visibleRange={start:s,end:i}}render(){const{start:t,end:e}=this.visibleRange,s=this.items.slice(t,e);let i="";s.forEach((e,s)=>{const o=t+s,n=o*this.options.itemHeight;i+=`<div style="position:absolute;top:${n}px;left:0;right:0;height:${this.options.itemHeight}px;">`,i+=this.options.renderItem?this.options.renderItem(e,o):e,i+="</div>"}),this.container.innerHTML=`<div style="position:relative;height:${this.containerHeight}px;">${i}</div>`}},isMobile:e,isTablet:function(){return/iPad|Android(?!.*Mobile)/i.test(navigator.userAgent)},init(){e()&&(new this.SwipeActions,new this.MobileMenu,this.setViewport(),console.log("Mobile interactions initialized"))},setViewport(){const t=()=>{const t=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${t}px`)};t(),window.addEventListener("resize",t)}},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{window.mobileInteractions.init()}):window.mobileInteractions.init()}();