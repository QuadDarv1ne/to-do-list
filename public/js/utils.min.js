window.showToast=function(t,e="info"){let o=document.getElementById("toast-container");o||(o=document.createElement("div"),o.id="toast-container",o.style.cssText="position: fixed; top: 20px; right: 20px; z-index: 9999;",document.body.appendChild(o));const n=document.createElement("div");n.className=`alert alert-${e} alert-dismissible fade show`,n.style.cssText="margin-bottom: 10px; min-width: 300px;";const i=document.createElement("span");i.textContent=t,n.appendChild(i);const r=document.createElement("button");r.type="button",r.className="btn-close",r.onclick=function(){this.parentElement.remove()},n.appendChild(r),o.appendChild(n),setTimeout(()=>{n.parentElement&&n.remove()},5e3)},window.showNotification=function(t,e,o="info"){"Notification"in window&&"granted"===Notification.permission?new Notification(t,{body:e,icon:"/icon.png",badge:"/icon.png"}):"function"==typeof window.showToast&&window.showToast(`${t}: ${e}`,o)},window.fetchJSON=async function(t,e={}){try{const o=await fetch(t,{headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",...e.headers},...e});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return await o.json()}catch(t){throw console.error("Fetch error:",t),window.showToast("Ошибка загрузки данных","danger"),t}},window.validateForm=function(t){const e=t.querySelectorAll("input[required], textarea[required], select[required]");let o=!0;return e.forEach(t=>{t.value.trim()?t.classList.remove("is-invalid"):(t.classList.add("is-invalid"),o=!1)}),o},window.debounce=function(t,e=300){let o;return function(...n){clearTimeout(o),o=setTimeout(()=>{clearTimeout(o),t(...n)},e)}},window.throttle=function(t,e=300){let o;return function(...n){o||(t.apply(this,n),o=!0,setTimeout(()=>o=!1,e))}},window.storage={set:(t,e)=>{try{return localStorage.setItem(t,JSON.stringify(e)),!0}catch(t){return console.error("Storage error:",t),!1}},get:(t,e=null)=>{try{const o=localStorage.getItem(t);return o?JSON.parse(o):e}catch(t){return console.error("Storage error:",t),e}},remove:t=>{try{return localStorage.removeItem(t),!0}catch(t){return console.error("Storage error:",t),!1}},clear:()=>{try{return localStorage.clear(),!0}catch(t){return console.error("Storage error:",t),!1}}},window.formatDate=function(t,e="short"){const o=new Date(t);return"short"===e?o.toLocaleDateString("ru-RU"):"long"===e?o.toLocaleDateString("ru-RU",{year:"numeric",month:"long",day:"numeric"}):"time"===e?o.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"}):"datetime"===e?`${o.toLocaleDateString("ru-RU")} ${o.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})}`:o.toLocaleDateString("ru-RU")},window.confirmAction=function(t,e){confirm(t)&&e()},window.showLoading=function(t){t&&(t.classList.add("loading"),t.style.pointerEvents="none",t.style.opacity="0.6")},window.hideLoading=function(t){t&&(t.classList.remove("loading"),t.style.pointerEvents="",t.style.opacity="")},window.copyToClipboard=function(t){if(navigator.clipboard)navigator.clipboard.writeText(t).then(()=>{window.showToast("Скопировано в буфер обмена","success")}).catch(()=>{window.showToast("Ошибка копирования","danger")});else{const e=document.createElement("textarea");e.value=t,e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.select();try{document.execCommand("copy"),window.showToast("Скопировано в буфер обмена","success")}catch(t){window.showToast("Ошибка копирования","danger")}document.body.removeChild(e)}},window.escapeHtml=function(t){const e=document.createElement("div");return e.textContent=t,e.innerHTML},window.getQueryParam=function(t){return new URLSearchParams(window.location.search).get(t)},window.scrollToElement=function(t,e=0){if(!t)return;const o=t.getBoundingClientRect().top+window.pageYOffset-e;window.scrollTo({top:o,behavior:"smooth"})},window.isInViewport=function(t){if(!t)return!1;const e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)},document.addEventListener("DOMContentLoaded",()=>{});