!function(){"use strict";class s{constructor(){this.loadedFiles=new Set,this.loadingFiles=new Map,this.priorities={critical:["/css/optimized-core.css","/css/utilities.css"],high:["/css/components-optimized.css","/css/themes.css","/css/dark-modern-theme.css","/css/button-system.css","/css/form-system.css"],medium:["/css/card-system.css","/css/layout-system.css","/css/navigation-system.css","/css/table-system.css","/css/typography-system.css","/css/modal-system.css","/css/dashboard-styles.css"],low:["/css/animations.css","/css/animation-library.css","/css/micro-animations.css","/css/gradient-effects.css","/css/modern-interactions.css","/css/responsive-enhancements.css","/css/accessibility.css","/css/performance-optimizations.css","/css/footer-enhanced.css","/css/advanced-components.css","/css/theme-transitions.css","/css/mobile-table-adaptation.css"],page:["/css/pages.css","/css/main.css"]},this.init()}init(){this.loadPriority("critical"),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{this.loadPriority("high"),this.scheduleRemainingLoads()}):(this.loadPriority("high"),this.scheduleRemainingLoads())}scheduleRemainingLoads(){setTimeout(()=>{this.loadPriority("medium")},100),"requestIdleCallback"in window?requestIdleCallback(()=>{this.loadPriority("low")},{timeout:2e3}):setTimeout(()=>{this.loadPriority("low")},500),this.loadPageSpecificCSS()}loadPriority(s){const e=this.priorities[s];e&&e.forEach(e=>{this.loadCSS(e,s)})}loadCSS(s,e="medium"){if(this.loadedFiles.has(s))return Promise.resolve();if(this.loadingFiles.has(s))return this.loadingFiles.get(s);const t=new Promise((t,o)=>{const a=document.createElement("link");a.rel="stylesheet",a.href=s,a.media="low"===e?"print":"all",a.onload=()=>{"low"===e&&(a.media="all"),this.loadedFiles.add(s),this.loadingFiles.delete(s),t()},a.onerror=()=>{console.warn(`Failed to load CSS: ${s}`),this.loadingFiles.delete(s),o(new Error(`Failed to load ${s}`))},document.head.appendChild(a)});return this.loadingFiles.set(s,t),t}loadPageSpecificCSS(){const s=window.location.pathname,e={"/dashboard":["/css/pages.css","/css/main.css"],"/calendar":["/css/pages.css","/css/main.css"],"/analytics":["/css/pages.css","/css/main.css"],"/profile":["/css/pages.css"],"/task":["/css/pages.css"]};for(const[t,o]of Object.entries(e))if(s.includes(t)){o.forEach(s=>{"requestIdleCallback"in window?requestIdleCallback(()=>this.loadCSS(s,"page")):setTimeout(()=>this.loadCSS(s,"page"),1e3)});break}}preloadForRoute(s){const e={"/dashboard":["/css/pages.css","/css/main.css"],"/calendar":["/css/pages.css","/css/main.css"],"/profile":["/css/pages.css"]}[s];e&&e.forEach(s=>{const e=document.createElement("link");e.rel="preload",e.as="style",e.href=s,document.head.appendChild(e)})}removeUnusedCSS(){const s=document.querySelectorAll('link[rel="stylesheet"]'),e=this.getUsedSelectors();s.forEach(s=>{if(s.href&&!s.href.includes("bootstrap")&&!s.href.includes("font-awesome"))try{const t=s.sheet;if(!t)return;const o=Array.from(t.cssRules||[]);let a=!1;o.forEach(s=>{if(s.selectorText){const t=s.selectorText.split(":")[0].trim();(e.has(t)||document.querySelector(t))&&(a=!0)}}),!a&&o.length>0&&console.log(`Potentially unused stylesheet: ${s.href}`)}catch(s){}})}getUsedSelectors(){const s=new Set;return document.querySelectorAll("*").forEach(e=>{e.classList.length>0&&e.classList.forEach(e=>s.add("."+e)),e.id&&s.add("#"+e.id),s.add(e.tagName.toLowerCase())}),s}getStats(){return{loaded:this.loadedFiles.size,loading:this.loadingFiles.size,total:Object.values(this.priorities).flat().length,files:Array.from(this.loadedFiles)}}loadAll(){Object.keys(this.priorities).forEach(s=>{this.loadPriority(s)})}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{window.CSSLazyLoader=new s}):window.CSSLazyLoader=new s,window.cssLoader={load:(s,e)=>window.CSSLazyLoader&&window.CSSLazyLoader.loadCSS(s,e),preload:s=>window.CSSLazyLoader&&window.CSSLazyLoader.preloadForRoute(s),stats:()=>window.CSSLazyLoader&&window.CSSLazyLoader.getStats(),loadAll:()=>window.CSSLazyLoader&&window.CSSLazyLoader.loadAll()},document.addEventListener("mouseover",s=>{const e=s.target.closest("a[href]");if(e&&e.href&&e.href.startsWith(window.location.origin)){const s=new URL(e.href).pathname;window.CSSLazyLoader&&window.CSSLazyLoader.preloadForRoute(s)}},{passive:!0})}();