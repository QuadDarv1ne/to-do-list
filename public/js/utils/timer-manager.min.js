!function(){"use strict";window.timerManager=new class{constructor(){this.timers=new Map,this.intervals=new Map}setTimeout(t,e,s=null){const i=s||`timeout_${Date.now()}_${Math.random()}`;this.timers.has(i)&&clearTimeout(this.timers.get(i));const r=setTimeout(()=>{t(),this.timers.delete(i)},e);return this.timers.set(i,r),i}setInterval(t,e,s=null){const i=s||`interval_${Date.now()}_${Math.random()}`;this.intervals.has(i)&&clearInterval(this.intervals.get(i));const r=setInterval(t,e);return this.intervals.set(i,r),i}clearTimeout(t){return!!this.timers.has(t)&&(clearTimeout(this.timers.get(t)),this.timers.delete(t),!0)}clearInterval(t){return!!this.intervals.has(t)&&(clearInterval(this.intervals.get(t)),this.intervals.delete(t),!0)}clearAllTimers(){this.timers.forEach(t=>clearTimeout(t)),this.timers.clear()}clearAllIntervals(){this.intervals.forEach(t=>clearInterval(t)),this.intervals.clear()}clearAll(){this.clearAllTimers(),this.clearAllIntervals()}getStats(){return{timers:this.timers.size,intervals:this.intervals.size,total:this.timers.size+this.intervals.size}}},window.addEventListener("beforeunload",()=>{window.timerManager.clearAll()}),document.addEventListener("visibilitychange",()=>{if(document.hidden){const t=window.timerManager.getStats();t.total>10&&console.warn(`[TimerManager] ${t.total} активных таймеров при скрытии страницы`)}})}();