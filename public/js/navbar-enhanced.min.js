!function(){"use strict";const e=document.querySelector(".navbar-enhanced");let t=0;window.addEventListener("scroll",()=>{const n=window.pageYOffset;n>50?e.classList.add("scrolled"):e.classList.remove("scrolled"),t=n});const n=window.location.pathname;document.querySelectorAll(".nav-link-enhanced").forEach(e=>{const t=e.getAttribute("href");(t&&n.startsWith(t)&&"/"!==t||"/"===t&&"/"===n)&&e.classList.add("active")});function o(){const e=document.querySelector(".notification-badge-enhanced");e&&fetch("/notifications/unread-count").then(e=>e.json()).then(t=>{t.count>0?(e.textContent=t.count>9?"9+":t.count,e.style.display="block"):e.style.display="none"}).catch(e=>console.error("Error updating notification count:",e))}document.querySelectorAll(".dropdown").forEach(e=>{const t=e.querySelector(".dropdown-menu-enhanced");e.addEventListener("show.bs.dropdown",()=>{t.style.display="block",t.style.opacity="0",t.style.transform="translateY(-10px)",requestAnimationFrame(()=>{t.style.transition="opacity 0.3s ease, transform 0.3s ease",t.style.opacity="1",t.style.transform="translateY(0)"})}),e.addEventListener("hide.bs.dropdown",()=>{t.style.opacity="0",t.style.transform="translateY(-10px)",setTimeout(()=>{t.style.display="none"},300)})}),window.toggleFabMenu=function(){const e=document.getElementById("fabMenu"),t=document.getElementById("fabBackdrop"),n=document.getElementById("fabButton");if(e&&t&&n){e.classList.contains("show")?(e.classList.remove("show"),t.classList.remove("show"),n.style.transform="rotate(0deg)"):(e.classList.add("show"),t.classList.add("show"),n.style.transform="rotate(45deg)")}},document.addEventListener("keydown",e=>{if("Escape"===e.key){const e=document.getElementById("fabMenu"),t=document.getElementById("fabBackdrop"),n=document.getElementById("fabButton");e&&e.classList.contains("show")&&(e.classList.remove("show"),t.classList.remove("show"),n&&(n.style.transform="rotate(0deg)"))}}),document.querySelector(".notification-badge-enhanced")&&(o(),setInterval(o,3e5)),document.addEventListener("keydown",e=>{if("INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName){if((e.ctrlKey||e.metaKey)&&"k"===e.key){e.preventDefault();const t=document.querySelector('input[type="search"]');t&&t.focus()}switch(e.key.toLowerCase()){case"t":window.location.href="/task";break;case"d":window.location.href="/";break;case"k":window.location.href="/kanban";break;case"c":window.location.href="/calendar";break;case"p":window.location.href="/profile";break;case"n":window.location.href="/task/new";break;case"?":new bootstrap.Modal(document.getElementById("keyboardShortcutsModal")).show()}}});const a=document.querySelectorAll(".navbar-collapse-enhanced .nav-link-enhanced"),s=document.querySelector(".navbar-toggler-enhanced"),c=document.querySelector(".navbar-collapse-enhanced");a.forEach(e=>{e.addEventListener("click",()=>{window.innerWidth<992&&c.classList.contains("show")&&s.click()})}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){const t=this.getAttribute("href");if("#"!==t&&"#!"!==t){e.preventDefault();const n=document.querySelector(t);n&&n.scrollIntoView({behavior:"smooth",block:"start"})}})});const r=document.querySelector(".user-avatar-enhanced");if(r&&!r.textContent.trim()){const e=(r.getAttribute("data-name")||"User").split(" ").map(e=>e[0]).join("").toUpperCase().substring(0,2);r.textContent=e}function l(e){const t=e.currentTarget,n=document.createElement("span"),o=Math.max(t.clientWidth,t.clientHeight),a=o/2;n.style.width=n.style.height=`${o}px`,n.style.left=e.clientX-t.offsetLeft-a+"px",n.style.top=e.clientY-t.offsetTop-a+"px",n.classList.add("ripple");const s=t.querySelector(".ripple");s&&s.remove(),t.appendChild(n)}[...document.querySelectorAll('[data-bs-toggle="tooltip"]')].map(e=>new bootstrap.Tooltip(e));document.querySelectorAll(".btn-calendar, .quick-action-btn-enhanced").forEach(e=>{e.addEventListener("click",l)});const i=document.createElement("style");i.textContent="\n        .ripple {\n            position: absolute;\n            border-radius: 50%;\n            background: rgba(255, 255, 255, 0.6);\n            transform: scale(0);\n            animation: ripple-animation 0.6s ease-out;\n            pointer-events: none;\n        }\n        \n        @keyframes ripple-animation {\n            to {\n                transform: scale(4);\n                opacity: 0;\n            }\n        }\n    ",document.head.appendChild(i),console.log("âœ¨ Enhanced Navbar initialized")}();