!function(){"use strict";window.JSLazyLoader=new class{constructor(){this.loaded=new Set,this.loading=new Map,this.modules={interaction:["/js/hotkeys.js","/js/keyboard-shortcuts.js","/js/quick-search.js"],scroll:["/js/lazy-load.js","/js/image-optimizer.js"],forms:["/js/auto-save.js","/js/form-utilities.js"],dragdrop:["/js/drag-drop-manager.js"],ui:["/js/ui-enhancements.js","/js/modern-interactions.js","/js/component-manager.js"]},this.init()}init(){setTimeout(()=>this.loadCategory("ui"),2e3),this.setupInteractionLoader(),this.setupScrollLoader(),this.setupFormLoader(),this.setupDragDropLoader()}setupInteractionLoader(){const e=["click","keydown","touchstart"],o=()=>{this.loadCategory("interaction"),e.forEach(e=>document.removeEventListener(e,o,!0))};e.forEach(e=>{document.addEventListener(e,o,{once:!0,capture:!0})})}setupScrollLoader(){const e=()=>{this.loadCategory("scroll"),window.removeEventListener("scroll",e)};window.addEventListener("scroll",e,{once:!0,passive:!0})}setupFormLoader(){document.addEventListener("focusin",e=>{e.target.matches("input, textarea, select")&&this.loadCategory("forms")},{once:!0})}setupDragDropLoader(){document.addEventListener("mouseover",e=>{e.target.closest('[draggable="true"]')&&this.loadCategory("dragdrop")},{once:!0})}loadCategory(e){const o=this.modules[e];o&&o.forEach(e=>this.loadScript(e))}loadScript(e){if(this.loaded.has(e))return Promise.resolve();if(this.loading.has(e))return this.loading.get(e);const o=new Promise((o,t)=>{const s=document.createElement("script");s.src=e,s.defer=!0,s.onload=()=>{this.loaded.add(e),this.loading.delete(e),o()},s.onerror=()=>{this.loading.delete(e),console.warn(`Failed to load: ${e}`),t(new Error(`Failed to load ${e}`))},document.head.appendChild(s)});return this.loading.set(e,o),o}load(e){return this.loadScript(e)}loadAll(e){return this.loadCategory(e)}getStats(){return{loaded:this.loaded.size,loading:this.loading.size,modules:Array.from(this.loaded)}}},window.jsLoader={load:e=>window.JSLazyLoader.load(e),loadCategory:e=>window.JSLazyLoader.loadAll(e),stats:()=>window.JSLazyLoader.getStats()}}();