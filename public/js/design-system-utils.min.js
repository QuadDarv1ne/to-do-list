class ThemeSwitcher{constructor(){this.THEME_KEY="app_theme",this.themes=["light","dark","orange","purple","custom"],this.currentTheme=this.getStoredTheme(),this.init()}init(){this.applyTheme(this.currentTheme),this.bindEvents(),this.updateActiveState()}getStoredTheme(){const t=localStorage.getItem(this.THEME_KEY);return t&&this.themes.includes(t)?t:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}applyTheme(t){const e=document.documentElement;"light"===t?e.removeAttribute("data-theme"):e.setAttribute("data-theme",t),this.currentTheme=t,localStorage.setItem(this.THEME_KEY,t),this.updateActiveState(),window.dispatchEvent(new CustomEvent("themechange",{detail:{theme:t}}))}toggle(){const t=(this.themes.indexOf(this.currentTheme)+1)%this.themes.length;this.applyTheme(this.themes[t])}setTheme(t){this.themes.includes(t)&&this.applyTheme(t)}getTheme(){return this.currentTheme}getNextTheme(){const t=(this.themes.indexOf(this.currentTheme)+1)%this.themes.length;return this.themes[t]}updateActiveState(){document.querySelectorAll("[data-theme-toggle]").forEach(t=>{const e=t.querySelector("i");e&&(e.className=this.getThemeIcon(this.currentTheme));const s=t.querySelector("[data-tooltip]");s&&s.setAttribute("data-tooltip",this.getThemeName(this.currentTheme))}),document.querySelectorAll("[data-theme-value]").forEach(t=>{const e=t.getAttribute("data-theme-value")===this.currentTheme;t.classList.toggle("active",e),t.setAttribute("aria-current",e?"true":"false")})}getThemeIcon(t){const e={light:"fas fa-sun",dark:"fas fa-moon",orange:"fas fa-orange",purple:"fas fa-palette",custom:"fas fa-sliders-h"};return e[t]||e.light}getThemeName(t){return{light:"Ð¡Ð²ÐµÑ‚Ð»Ð°Ñ",dark:"Ð¢Ñ‘Ð¼Ð½Ð°Ñ",orange:"ÐžÑ€Ð°Ð½Ð¶ÐµÐ²Ð°Ñ",purple:"Ð¤Ð¸Ð¾Ð»ÐµÑ‚Ð¾Ð²Ð°Ñ",custom:"ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÑÐºÐ°Ñ"}[t]||"Ð¡Ð²ÐµÑ‚Ð»Ð°Ñ"}bindEvents(){document.querySelectorAll("[data-theme-toggle]").forEach(t=>{t.addEventListener("click",t=>{t.preventDefault(),this.toggle()})}),document.querySelectorAll("[data-theme-value]").forEach(t=>{t.addEventListener("click",e=>{e.preventDefault();const s=t.getAttribute("data-theme-value");this.applyTheme(s)})}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",t=>{localStorage.getItem(this.THEME_KEY)||this.applyTheme(t.matches?"dark":"light")}),document.addEventListener("keydown",t=>{t.altKey&&"t"===t.key&&(t.preventDefault(),this.toggle())})}}class ToastManager{constructor(){this.container=null,this.toasts=[],this.defaultDuration=5e3,this.maxToasts=5,this.init()}init(){this.createContainer()}createContainer(){this.container=document.createElement("div"),this.container.className="toast-container",this.container.style.cssText="\n            position: fixed;\n            bottom: 20px;\n            right: 20px;\n            z-index: var(--z-toast, 1080);\n            display: flex;\n            flex-direction: column;\n            gap: 10px;\n            max-width: 420px;\n        ",document.body.appendChild(this.container)}show(t,e={}){const{type:s="info",title:i=null,duration:a=this.defaultDuration,icon:n=null,closable:o=!0,action:r=null}=e;this.toasts.length>=this.maxToasts&&this.remove(this.toasts[0]);const l=this.createToast(t,s,i,n,o,r);return this.container.appendChild(l),this.toasts.push(l),requestAnimationFrame(()=>{l.classList.add("show")}),a>0&&setTimeout(()=>this.remove(l),a),l}createToast(t,e,s,i,a,n){const o=document.createElement("div");o.className=`toast toast-${e}`,o.setAttribute("role","alert"),o.setAttribute("aria-live","assertive");const r={success:"fas fa-check-circle",error:"fas fa-exclamation-circle",warning:"fas fa-exclamation-triangle",info:"fas fa-info-circle"};o.innerHTML=`\n            ${i?`<div class="toast-icon"><i class="${i}"></i></div>`:`<div class="toast-icon"><i class="${r[e]||r.info}"></i></div>`}\n            <div class="toast-content">\n                ${s?`<div class="toast-title">${this.escapeHtml(s)}</div>`:""}\n                <div class="toast-message">${this.escapeHtml(t)}</div>\n            </div>\n            ${a?'<button class="toast-close" aria-label="Close"><i class="fas fa-times"></i></button>':""}\n            ${n?`<div class="toast-action">${n}</div>`:""}\n        `;const l=o.querySelector(".toast-close");return l&&l.addEventListener("click",()=>this.remove(o)),o}remove(t){t&&this.container.contains(t)&&(t.classList.remove("show"),t.style.opacity="0",t.style.transform="translateX(100%)",setTimeout(()=>{this.container.contains(t)&&(this.container.removeChild(t),this.toasts=this.toasts.filter(e=>e!==t))},300))}success(t,e={}){return this.show(t,{...e,type:"success"})}error(t,e={}){return this.show(t,{...e,type:"error"})}warning(t,e={}){return this.show(t,{...e,type:"warning"})}info(t,e={}){return this.show(t,{...e,type:"info"})}escapeHtml(t){const e=document.createElement("div");return e.textContent=t,e.innerHTML}}class PageLoader{constructor(){this.loader=null,this.minDisplayTime=300,this.startTime=null,this.init()}init(){this.createLoader(),this.bindEvents(),this.startTime=Date.now()}createLoader(){this.loader=document.createElement("div"),this.loader.className="page-loader",this.loader.id="pageLoader",this.loader.innerHTML='\n            <div class="spinner"></div>\n        ',document.body.appendChild(this.loader)}hide(){const t=Date.now()-this.startTime,e=Math.max(0,this.minDisplayTime-t);setTimeout(()=>{this.loader.classList.add("hidden"),document.body.classList.add("loaded"),setTimeout(()=>{this.loader&&this.loader.parentNode&&this.loader.parentNode.removeChild(this.loader)},500)},e)}bindEvents(){window.addEventListener("load",()=>this.hide()),document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>this.hide(),100)}),document.addEventListener("turbo:load",()=>this.hide()),document.addEventListener("turbo:frame-load",()=>this.hide())}}class ScrollManager{constructor(){this.scrollThreshold=100,this.lastScrollY=0,this.ticking=!1,this.init()}init(){this.bindEvents()}bindEvents(){window.addEventListener("scroll",()=>this.onScroll(),{passive:!0})}onScroll(){this.lastScrollY=window.scrollY,this.ticking||(window.requestAnimationFrame(()=>{this.update(),this.ticking=!1}),this.ticking=!0)}update(){const t=document.querySelector(".navbar");t&&(this.lastScrollY>this.scrollThreshold?t.style.boxShadow="var(--shadow-md)":t.style.boxShadow="var(--shadow-sm)");const e=document.querySelector("[data-back-to-top]");e&&(this.lastScrollY>3*this.scrollThreshold?(e.style.opacity="1",e.style.pointerEvents="auto"):(e.style.opacity="0",e.style.pointerEvents="none"))}scrollTo(t,e={}){const{offset:s=0,duration:i=500,easing:a="easeInOutQuart"}=e,n="string"==typeof t?document.querySelector(t):t;if(!n)return;const o=n.getBoundingClientRect().top+window.scrollY-s,r=window.scrollY,l=o-r;let c=null;const h=t=>{null===c&&(c=t);const e=t-c,s=Math.min(e/i,1),n=this.easingFunctions[a](s);window.scrollTo(0,r+l*n),e<i&&requestAnimationFrame(h)};requestAnimationFrame(h)}easingFunctions={easeInOutQuart:t=>t<.5?8*t*t*t*t:1-8*--t*t*t*t}}document.addEventListener("DOMContentLoaded",()=>{window.themeSwitcher=new ThemeSwitcher,window.toastManager=new ToastManager,window.pageLoader=new PageLoader,window.scrollManager=new ScrollManager,window.showToast=(t,e="info")=>{window.toastManager[e](t)},console.log("%cðŸŽ¨ Design System v2.0 initialized","color: #6366f1; font-weight: bold; font-size: 14px;")}),"undefined"!=typeof module&&module.exports&&(module.exports={ThemeSwitcher:ThemeSwitcher,ToastManager:ToastManager,PageLoader:PageLoader,ScrollManager:ScrollManager});