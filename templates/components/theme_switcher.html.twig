{# Enhanced Theme Switcher Component with 5 Themes #}
<div class="theme-switcher-widget">
    {# Quick Theme Toggle Button (for navbar) #}
    <button 
        type="button" 
        class="btn btn-link theme-toggle-btn quick-action-btn-enhanced" 
        id="themeToggle"
        data-bs-toggle="modal"
        data-bs-target="#themeModal"
        title="Сменить тему"
        aria-label="Открыть выбор темы">
        <i class="fas fa-palette"></i>
    </button>
    
    {# Theme Selector Modal #}
    <div class="modal fade" id="themeModal" tabindex="-1" aria-labelledby="themeModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header border-0 pb-0">
                    <h5 class="modal-title d-flex align-items-center gap-2" id="themeModalLabel">
                        <i class="fas fa-palette text-primary"></i>
                        <span>Выбор темы оформления</span>
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Закрыть"></button>
                </div>
                <div class="modal-body p-4">
                    <p class="text-muted mb-4">Выберите тему оформления для персонализации интерфейса</p>
                    
                    {# Theme Grid #}
                    <div class="row g-3 mb-4">
                        {# Light Theme #}
                        <div class="col-md-6">
                            <div class="theme-card" data-theme-select="light">
                                <div class="theme-preview theme-preview-light">
                                    <div class="theme-preview-header"></div>
                                    <div class="theme-preview-body">
                                        <div class="theme-preview-card"></div>
                                        <div class="theme-preview-card"></div>
                                    </div>
                                </div>
                                <div class="theme-card-body">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div>
                                            <h6 class="mb-1">Светлая</h6>
                                            <small class="text-muted">Классическая светлая тема</small>
                                        </div>
                                        <div class="theme-check">
                                            <i class="fas fa-check-circle"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        {# Dark Theme #}
                        <div class="col-md-6">
                            <div class="theme-card" data-theme-select="dark">
                                <div class="theme-preview theme-preview-dark">
                                    <div class="theme-preview-header"></div>
                                    <div class="theme-preview-body">
                                        <div class="theme-preview-card"></div>
                                        <div class="theme-preview-card"></div>
                                    </div>
                                </div>
                                <div class="theme-card-body">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div>
                                            <h6 class="mb-1">Тёмная</h6>
                                            <small class="text-muted">Снижает нагрузку на глаза</small>
                                        </div>
                                        <div class="theme-check">
                                            <i class="fas fa-check-circle"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        {# Orange Theme #}
                        <div class="col-md-6">
                            <div class="theme-card" data-theme-select="orange">
                                <div class="theme-preview theme-preview-orange">
                                    <div class="theme-preview-header"></div>
                                    <div class="theme-preview-body">
                                        <div class="theme-preview-card"></div>
                                        <div class="theme-preview-card"></div>
                                    </div>
                                </div>
                                <div class="theme-card-body">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div>
                                            <h6 class="mb-1">Оранжевая</h6>
                                            <small class="text-muted">Энергичная и яркая</small>
                                        </div>
                                        <div class="theme-check">
                                            <i class="fas fa-check-circle"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        {# Purple Theme #}
                        <div class="col-md-6">
                            <div class="theme-card" data-theme-select="purple">
                                <div class="theme-preview theme-preview-purple">
                                    <div class="theme-preview-header"></div>
                                    <div class="theme-preview-body">
                                        <div class="theme-preview-card"></div>
                                        <div class="theme-preview-card"></div>
                                    </div>
                                </div>
                                <div class="theme-card-body">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div>
                                            <h6 class="mb-1">Фиолетовая</h6>
                                            <small class="text-muted">Креативная и стильная</small>
                                        </div>
                                        <div class="theme-check">
                                            <i class="fas fa-check-circle"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        {# Custom Theme #}
                        <div class="col-12">
                            <div class="theme-card theme-card-custom" data-theme-select="custom">
                                <div class="theme-card-body">
                                    <div class="d-flex justify-content-between align-items-center mb-3">
                                        <div>
                                            <h6 class="mb-1">
                                                <i class="fas fa-magic me-2"></i>Настраиваемая тема
                                            </h6>
                                            <small class="text-muted">Создайте свою уникальную цветовую схему</small>
                                        </div>
                                        <div class="theme-check">
                                            <i class="fas fa-check-circle"></i>
                                        </div>
                                    </div>
                                    
                                    {# Custom Color Pickers #}
                                    <div class="custom-theme-controls" id="customThemeControls" style="display: none;">
                                        <div class="row g-3">
                                            <div class="col-md-4">
                                                <label class="form-label small">Основной цвет</label>
                                                <input type="color" class="form-control form-control-color" id="customPrimary" value="#667eea">
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label small">Фон</label>
                                                <input type="color" class="form-control form-control-color" id="customBgBody" value="#f9fafb">
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label small">Карточки</label>
                                                <input type="color" class="form-control form-control-color" id="customBgCard" value="#ffffff">
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label small">Текст</label>
                                                <input type="color" class="form-control form-control-color" id="customTextPrimary" value="#1f2937">
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label small">Успех</label>
                                                <input type="color" class="form-control form-control-color" id="customSuccess" value="#10b981">
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label small">Опасность</label>
                                                <input type="color" class="form-control form-control-color" id="customDanger" value="#ef4444">
                                            </div>
                                        </div>
                                        <div class="mt-3">
                                            <button type="button" class="btn btn-sm btn-primary" id="applyCustomTheme">
                                                <i class="fas fa-check me-1"></i>Применить
                                            </button>
                                            <button type="button" class="btn btn-sm btn-outline-secondary" id="resetCustomTheme">
                                                <i class="fas fa-undo me-1"></i>Сбросить
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    {# Additional Options #}
                    <div class="theme-options">
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="autoThemeSwitch">
                            <label class="form-check-label" for="autoThemeSwitch">
                                <i class="fas fa-adjust me-2"></i>Автоматически переключать тему по времени суток
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
/* Theme Switcher Styles */
.theme-card {
    border: 2px solid var(--border);
    border-radius: 12px;
    overflow: hidden;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    background: var(--bg-card);
}

.theme-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-hover);
    border-color: var(--primary);
}

.theme-card.active {
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}

.theme-card.active .theme-check {
    opacity: 1;
    color: var(--primary);
}

.theme-preview {
    height: 120px;
    padding: 8px;
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.theme-preview-header {
    height: 20px;
    border-radius: 6px;
    opacity: 0.9;
}

.theme-preview-body {
    flex: 1;
    display: flex;
    gap: 6px;
}

.theme-preview-card {
    flex: 1;
    border-radius: 6px;
    opacity: 0.8;
}

/* Light Theme Preview */
.theme-preview-light {
    background: #f9fafb;
}

.theme-preview-light .theme-preview-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

.theme-preview-light .theme-preview-card {
    background: #ffffff;
    border: 1px solid #e5e7eb;
}

/* Dark Theme Preview */
.theme-preview-dark {
    background: #0f172a;
}

.theme-preview-dark .theme-preview-header {
    background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
}

.theme-preview-dark .theme-preview-card {
    background: #1e293b;
    border: 1px solid #334155;
}

/* Orange Theme Preview */
.theme-preview-orange {
    background: #fff7ed;
}

.theme-preview-orange .theme-preview-header {
    background: linear-gradient(135deg, #f97316 0%, #dc2626 100%);
}

.theme-preview-orange .theme-preview-card {
    background: #ffffff;
    border: 1px solid #fed7aa;
}

/* Purple Theme Preview */
.theme-preview-purple {
    background: #faf5ff;
}

.theme-preview-purple .theme-preview-header {
    background: linear-gradient(135deg, #a855f7 0%, #ec4899 100%);
}

.theme-preview-purple .theme-preview-card {
    background: #ffffff;
    border: 1px solid #e9d5ff;
}

.theme-card-body {
    padding: 1rem;
}

.theme-card-custom {
    border-style: dashed;
}

.theme-check {
    font-size: 1.5rem;
    opacity: 0;
    transition: all 0.3s ease;
}

.theme-options {
    padding-top: 1rem;
    border-top: 1px solid var(--border);
}

.form-control-color {
    height: 40px;
    cursor: pointer;
}
</style>
