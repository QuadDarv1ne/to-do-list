{# 
    Enhanced Modal Component
    Usage: {% include 'components/modal.html.twig' with {
        id: 'myModal',
        title: 'Заголовок',
        size: 'lg',
        content: modal_content
    } %}
#}

{% set modal_id = id|default('modal-' ~ random()) %}
{% set modal_size = size|default('') %}
{% set modal_title = title|default('') %}
{% set modal_centered = centered|default(false) %}
{% set modal_scrollable = scrollable|default(true) %}

<div class="modal fade" id="{{ modal_id }}" tabindex="-1" aria-labelledby="{{ modal_id }}Label" aria-hidden="true">
    <div class="modal-dialog {{ modal_size ? 'modal-' ~ modal_size : '' }} {{ modal_centered ? 'modal-dialog-centered' : '' }} {{ modal_scrollable ? 'modal-dialog-scrollable' : '' }}">
        <div class="modal-content">
            {% if modal_title %}
            <div class="modal-header">
                <h5 class="modal-title" id="{{ modal_id }}Label">
                    {% if icon is defined %}
                        <i class="fas {{ icon }} me-2"></i>
                    {% endif %}
                    {{ modal_title }}
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Закрыть"></button>
            </div>
            {% endif %}
            
            <div class="modal-body">
                {{ content|default('')|e('html') }}
            </div>
            
            {% if footer is defined %}
            <div class="modal-footer">
                {{ footer|default('')|e('html') }}
            </div>
            {% endif %}
        </div>
    </div>
</div>

<style>
.modal-content {
    border-radius: 16px;
    border: none;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
}

.modal-header {
    border-bottom: 1px solid rgba(0, 0, 0, 0.08);
    padding: 1.5rem;
    border-radius: 16px 16px 0 0;
}

.modal-body {
    padding: 1.5rem;
}

.modal-footer {
    border-top: 1px solid rgba(0, 0, 0, 0.08);
    padding: 1.25rem 1.5rem;
    border-radius: 0 0 16px 16px;
}

.modal.fade .modal-dialog {
    transform: scale(0.8) translateY(-50px);
    opacity: 0;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.modal.show .modal-dialog {
    transform: scale(1) translateY(0);
    opacity: 1;
}

[data-theme='dark'] .modal-content {
    background: #2d3748;
    color: #f7fafc;
}

[data-theme='dark'] .modal-header,
[data-theme='dark'] .modal-footer {
    border-color: #4a5568;
}

[data-theme='dark'] .btn-close {
    filter: invert(1);
}
</style>
