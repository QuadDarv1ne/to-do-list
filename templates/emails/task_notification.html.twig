<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ notification.subject }}</title>
    <style>
        /* Base styles */
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            line-height: 1.6; 
            color: #333; 
            margin: 0;
            padding: 0;
            background-color: #f5f7fa;
        }
        
        /* Container */
        .container {
            max-width: 600px;
            margin: 0 auto;
            background-color: #ffffff;
        }
        
        /* Header */
        .header { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 30px 20px;
            text-align: center;
            color: white;
        }
        
        .header h1 {
            margin: 0;
            font-size: 24px;
            font-weight: 600;
        }
        
        /* Content */
        .content { 
            padding: 30px;
        }
        
        .greeting {
            font-size: 16px;
            margin-bottom: 20px;
        }
        
        .message {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
            margin: 20px 0;
        }
        
        .task-info {
            background-color: #f0f7ff;
            border: 1px solid #d1e7ff;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
        }
        
        .task-info h3 {
            color: #2c3e50;
            margin-top: 0;
        }
        
        .task-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 10px;
        }
        
        .meta-item {
            display: flex;
            align-items: center;
            gap: 5px;
            color: #546e7a;
            font-size: 14px;
        }
        
        /* Button */
        .button-container {
            text-align: center;
            margin: 30px 0;
        }
        
        .button { 
            display: inline-block; 
            padding: 12px 30px; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white; 
            text-decoration: none; 
            border-radius: 30px;
            font-weight: 600;
            font-size: 16px;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
            transition: all 0.3s ease;
        }
        
        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }
        
        /* Footer */
        .footer { 
            background-color: #f8f9fa; 
            padding: 20px; 
            text-align: center; 
            font-size: 0.9em; 
            color: #666;
            border-top: 1px solid #e9ecef;
        }
        
        .footer-links {
            margin: 10px 0;
        }
        
        .footer-links a {
            color: #667eea;
            text-decoration: none;
            margin: 0 10px;
        }
        
        /* Responsive */
        @media (max-width: 600px) {
            .content { 
                padding: 20px; 
            }
            
            .header { 
                padding: 20px 15px; 
            }
            
            .header h1 {
                font-size: 20px;
            }
            
            .task-meta {
                flex-direction: column;
                gap: 8px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>{{ notification.subject }}</h1>
        </div>
        
        <div class="content">
            <p class="greeting">–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, {{ recipient.fullName }}!</p>
            
            <div class="message">
                {{ notification.message|nl2br }}
            </div>
            
            <!-- –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
            {% if notification.type == 'assignment' %}
                <div class="task-info">
                    <h3>üìã –ù–æ–≤–∞—è –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞</h3>
                    <p>–í–∞–º –Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–µ—Ç–∞–ª–∏ –∏ –ø—Ä–∏—Å—Ç—É–ø–∏—Ç–µ –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é –≤ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å—Ä–æ–∫–∏.</p>
                    
                    {% if task is defined and task %}
                        <div class="task-meta">
                            {% if task.deadline %}
                                <div class="meta-item">
                                    <strong>üìÖ –°—Ä–æ–∫:</strong> {{ task.deadline|date('d.m.Y') }}
                                </div>
                            {% endif %}
                            
                            {% if task.priority %}
                                <div class="meta-item">
                                    <strong>‚ö†Ô∏è –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:</strong> 
                                    <span style="color: {% if task.priority == 'high' %}#dc3545{% elseif task.priority == 'medium' %}#ffc107{% else %}#28a745{% endif %}">
                                        {{ task.priority|trans }}
                                    </span>
                                </div>
                            {% endif %}
                            
                            {% if task.creator %}
                                <div class="meta-item">
                                    <strong>üë§ –ù–∞–∑–Ω–∞—á–∏–ª:</strong> {{ task.creator.fullName }}
                                </div>
                            {% endif %}
                        </div>
                    {% endif %}
                </div>
                
            {% elseif notification.type == 'update' %}
                <div class="task-info">
                    <h3>üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏</h3>
                    <p>–í –∑–∞–¥–∞—á—É, –∑–∞ –∫–æ—Ç–æ—Ä–æ–π –≤—ã –Ω–∞–±–ª—é–¥–∞–µ—Ç–µ –∏–ª–∏ –≤ –∫–æ—Ç–æ—Ä–æ–π —É—á–∞—Å—Ç–≤—É–µ—Ç–µ, –±—ã–ª–∏ –≤–Ω–µ—Å–µ–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è.</p>
                </div>
                
            {% elseif notification.type == 'completion' %}
                <div class="task-info">
                    <h3>‚úÖ –ó–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞</h3>
                    <p>–ó–∞–¥–∞—á–∞, –∫–æ—Ç–æ—Ä—É—é –≤—ã –Ω–∞–∑–Ω–∞—á–∏–ª–∏, –±—ã–ª–∞ —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–º.</p>
                    
                    {% if task is defined and task and task.completedBy %}
                        <p><strong>–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å:</strong> {{ task.completedBy.fullName }}</p>
                    {% endif %}
                </div>
                
            {% elseif notification.type == 'reminder' %}
                <div class="task-info">
                    <h3>‚è∞ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –∑–∞–¥–∞—á–µ</h3>
                    <p>–ù–∞–ø–æ–º–∏–Ω–∞–µ–º –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ –≤ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å—Ä–æ–∫–∏.</p>
                    
                    {% if task is defined and task and task.deadline %}
                        <div class="meta-item">
                            <strong>‚è≥ –î–æ —Å—Ä–æ–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:</strong> 
                            {% set daysLeft = task.deadline.diff(notification.createdAt).days %}
                            {% if daysLeft == 0 %}
                                <span style="color: #dc3545;">–°–µ–≥–æ–¥–Ω—è</span>
                            {% elseif daysLeft == 1 %}
                                <span style="color: #fd7e14;">1 –¥–µ–Ω—å</span>
                            {% elseif daysLeft < 3 %}
                                <span style="color: #fd7e14;">{{ daysLeft }} –¥–Ω—è</span>
                            {% else %}
                                {{ daysLeft }} –¥–Ω–µ–π
                            {% endif %}
                        </div>
                    {% endif %}
                </div>
                
            {% else %}
                <div class="task-info">
                    <h3>üì¢ –°–∏—Å—Ç–µ–º–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</h3>
                    <p>–≠—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∞–º–∏.</p>
                </div>
            {% endif %}
            
            <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∑–∞–¥–∞—á–∏ (–µ—Å–ª–∏ –∑–∞–¥–∞—á–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç) -->
            {% if task is defined and task %}
                <div class="button-container">
                    <a href="{{ url('app_task_show', {'id': task.id}) }}" class="button">
                        {% if notification.type == 'assignment' %}
                            –ü–µ—Ä–µ–π—Ç–∏ –∫ –∑–∞–¥–∞—á–µ
                        {% elseif notification.type == 'update' %}
                            –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
                        {% elseif notification.type == 'completion' %}
                            –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
                        {% else %}
                            –û—Ç–∫—Ä—ã—Ç—å –∑–∞–¥–∞—á—É
                        {% endif %}
                    </a>
                </div>
            {% endif %}
            
            <p style="text-align: center; color: #666; margin-top: 20px;">
                –° —É–≤–∞–∂–µ–Ω–∏–µ–º,<br>
                <strong>–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∞–º–∏</strong>
            </p>
        </div>
        
        <div class="footer">
            <p>–≠—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–µ –æ—Ç–≤–µ—á–∞–π—Ç–µ –Ω–∞ –Ω–µ–≥–æ.</p>
            
            <div class="footer-links">
                {% if recipient is defined and recipient %}
                    <a href="{{ url('app_profile_notifications') }}">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</a> |
                    <a href="{{ url('app_task_index') }}">–í—Å–µ –∑–∞–¥–∞—á–∏</a>
                {% endif %}
            </div>
            
            <p>&copy; {{ 'now'|date('Y') }} –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–º–∏. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
            
            <p style="font-size: 0.8em; color: #999; margin-top: 10px;">
                ID —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: {{ notification.id }}<br>
                {{ notification.createdAt|date('d.m.Y H:i') }}
            </p>
        </div>
    </div>
</body>
</html>